{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport error from \"../img/error-icon.svg\";\n\n\nconst inputEl = document.querySelector(\"#datetime-picker\");\nconst startBtn = inputEl.nextElementSibling;\nconst spanElems = document.querySelectorAll(\".value\");\nlet userSelectedDate;\nconst currentDate = Date.now();\n\nstartBtn.disabled = true;\n\nstartBtn.addEventListener(\"click\", onBtnClick);\n\nfunction onBtnClick() { \n    startBtn.disabled = true;\n    inputEl.disabled = true;\n    const futureTime = new Date(inputEl.value);\n    const intervalId = setInterval(() => { \n        const currentTime = Date.now();\n        const diff = futureTime.getTime() - currentTime;\n        let { days, hours, minutes, seconds } = addLeadingZero(convertMs(diff));\n        if (futureTime.getTime() > currentTime) {\n            spanElems[0].textContent = days;\n            spanElems[1].textContent = hours;\n            spanElems[2].textContent = minutes;\n            spanElems[3].textContent = seconds;\n        } \n        if (diff < 1000) {\n            clearInterval(intervalId);\n            inputEl.disabled = false;\n        }\n    }, 1000)\n}\n\nfunction addLeadingZero(obj) { \n    let { days, hours, minutes, seconds } = obj;\n    days = String(days).padStart(2, \"0\");\n    hours = String(hours).padStart(2, \"0\");\n    minutes = String(minutes).padStart(2, \"0\");\n    seconds = String(seconds).padStart(2, \"0\");\n    return { days, hours, minutes, seconds };\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0].getTime() <= currentDate) {\n            startBtn.disabled = true;\n            return iziToast.show({\n                title: \"Error\",\n                titleColor: \"#fff\",\n                color: \"#ef4040\",\n                message: \"Please choose a date in the future\",\n                messageColor: \"#fff\",\n                position: \"topRight\",\n                iconUrl: error,\n            });\n        }\n        startBtn.disabled = false;\n        userSelectedDate = selectedDates[0];\n  },\n};\n\nflatpickr(inputEl, options);\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n"],"names":["inputEl","startBtn","spanElems","currentDate","onBtnClick","futureTime","intervalId","currentTime","diff","days","hours","minutes","seconds","addLeadingZero","convertMs","obj","options","selectedDates","iziToast","error","flatpickr","ms"],"mappings":"2GAOA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAWD,EAAQ,mBACnBE,EAAY,SAAS,iBAAiB,QAAQ,EAE9CC,EAAc,KAAK,MAEzBF,EAAS,SAAW,GAEpBA,EAAS,iBAAiB,QAASG,CAAU,EAE7C,SAASA,GAAa,CAClBH,EAAS,SAAW,GACpBD,EAAQ,SAAW,GACnB,MAAMK,EAAa,IAAI,KAAKL,EAAQ,KAAK,EACnCM,EAAa,YAAY,IAAM,CACjC,MAAMC,EAAc,KAAK,MACnBC,EAAOH,EAAW,QAAO,EAAKE,EACpC,GAAI,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EAAeC,EAAUN,CAAI,CAAC,EAClEH,EAAW,QAAS,EAAGE,IACvBL,EAAU,CAAC,EAAE,YAAcO,EAC3BP,EAAU,CAAC,EAAE,YAAcQ,EAC3BR,EAAU,CAAC,EAAE,YAAcS,EAC3BT,EAAU,CAAC,EAAE,YAAcU,GAE3BJ,EAAO,MACP,cAAcF,CAAU,EACxBN,EAAQ,SAAW,GAE1B,EAAE,GAAI,CACX,CAEA,SAASa,EAAeE,EAAK,CACzB,GAAI,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKG,EACxC,OAAAN,EAAO,OAAOA,CAAI,EAAE,SAAS,EAAG,GAAG,EACnCC,EAAQ,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EACrCC,EAAU,OAAOA,CAAO,EAAE,SAAS,EAAG,GAAG,EACzCC,EAAU,OAAOA,CAAO,EAAE,SAAS,EAAG,GAAG,EAClC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,MAAMI,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CACnB,GAAIA,EAAc,CAAC,EAAE,QAAO,GAAMd,EAC9B,OAAAF,EAAS,SAAW,GACbiB,EAAS,KAAK,CACjB,MAAO,QACP,WAAY,OACZ,MAAO,UACP,QAAS,qCACT,aAAc,OACd,SAAU,WACV,QAASC,CACzB,CAAa,EAELlB,EAAS,SAAW,GACDgB,EAAc,CAAC,CACvC,CACH,EAEAG,EAAUpB,EAASgB,CAAO,EAG1B,SAASF,EAAUO,EAAI,CAQrB,MAAMZ,EAAO,KAAK,MAAMY,EAAK,KAAG,EAE1BX,EAAQ,KAAK,MAAOW,EAAK,MAAO,IAAI,EAEpCV,EAAU,KAAK,MAAQU,EAAK,MAAO,KAAQ,GAAM,EAEjDT,EAAU,KAAK,MAASS,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAZ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}